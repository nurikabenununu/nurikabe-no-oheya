<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>あそびば - ぬりかべさんのおへや</title>
    
    <!-- 全体共通のCSSとコンポーネントのCSSを読み込み -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/components.css">
    
    <!-- Google Fontsを読み込み -->
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- A-Frameライブラリを読み込み -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    
    <!-- ページ専用のJavaScriptを読み込み -->
    <script src="assets/js/play-game.js"></script>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <h1 class="site-title">ぬりかべさんのおへや</h1>
            <nav class="site-nav">
                <ul class="nav-list">
                    <li><a href="index.html" class="nav-link">ホーム</a></li>
                    <li><a href="index.html#about" class="nav-link">ぬりかべさんのこと</a></li>
                    <li><a href="story.html" class="nav-link">ちいさなものがたり</a></li>
                    <li><a href="play.html" class="nav-link">あそびば</a></li>
                </ul>
            </nav>
            <button class="hamburger-btn" aria-label="ナビゲーションメニューを開く">
                <span class="hamburger-icon"></span>
            </button>
        </div>
    </header>

    <main>
        <section id="play" class="content-section">
            <h2 class="section-heading">ぬりかべさんとあそぼう！</h2>
            <p style="text-align:center;">ぬりかべさんに触ってみよう。</p>

            <div class="aframe-container">
                <a-scene embedded vr-mode-ui="enabled: false" inspector-plugin-ui="enabled: false">
                    <!-- アセット管理: 3Dモデル、画像、音声などを事前に読み込み -->
                    <a-assets>
                        <!-- ぬりかべさんの3Dモデル (例: nurikabe.gltf) -->
                        <a-asset-item id="nurikabe-model" src="assets/models/nurikabe.glb"></a-asset-item>
                        
                        <!-- 音声ファイル -->
                        <audio id="laugh-sound" src="assets/sounds/laugh.mp3" preload="auto"></audio>
                        <audio id="water-sound" src="assets/sounds/water_ripple.mp3" preload="auto"></audio>
                        <audio id="bell-sound" src="assets/sounds/wind_chime.mp3" preload="auto"></audio>
                        <audio id="small-bell-sound" src="assets/sounds/small_bell.mp3" preload="auto"></audio>
                        <audio id="yawn-sound" src="assets/sounds/yawn.mp3" preload="auto"></audio>
                    </a-assets>

                    <!-- カメラとカーソル -->
                    <a-entity camera position="0 1.6 3" look-controls>
                        <a-cursor raycaster="objects: .collidable" color="#F5D2D8"></a-cursor>
                    </a-entity>

                    <!-- 光源 -->
                    <a-entity light="type: ambient; color: #FDFCF7; intensity: 0.8"></a-entity>
                    <a-entity light="type: directional; color: #FDFCF7; intensity: 0.6" position="-1 2 4"></a-entity>

                    <!-- ぬりかべさんの3Dモデル -->
                    <a-entity id="nurikabe-main"
                              gltf-model="#nurikabe-model"
                              position="0 1 -2"
                              scale="1 1 1"
                              class="collidable"
                              nurikabe-interaction>
                        
                        <!-- モデルのパーツにイベントを設定するための子エンティティ -->
                        <!-- 3Dモデルがパーツとして分離されていることを想定 -->
                        <a-entity id="nurikabe-head" position="0 0.8 0" class="collidable"></a-entity>
                        <a-entity id="nurikabe-body" position="0 0 0" class="collidable"></a-entity>
                        <a-entity id="nurikabe-foot" position="0 -0.8 0" class="collidable"></a-entity>
                    </a-entity>

                    <!-- 床 -->
                    <a-plane position="0 0 -4" rotation="-90 0 0" width="10" height="10" color="#FDFCF7" shadow></a-plane>
                    
                    <!-- 空 -->
                    <a-sky color="#D4E9E2"></a-sky>
                </a-scene>
                <!-- 全画面表示切り替えボタンを追加 -->
                <button id="game-start-button" class="btn btn-primary">げーむスタート</button>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="footer-nurikabe">
            <img src="assets/images/nurikabe_sleep.png" alt="眠っているぬりかべさんのイラスト">
        </div>
        <p class="copyright">&copy; 2025 ぬりかべさんのおへや All rights reserved.</p>
    </footer>

    <!-- ページ共通のJavaScriptを読み込み -->
    <script src="assets/js/main.js"></script>
</body>
</html>